<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro" name="drobot">

  <!-- ============================================================
       DROBOT - SW2URDF Export → ROS2 변환
       좌표/mesh는 SW2URDF 자동생성값 그대로 사용
       Joint type, mimic, gazebo 플러그인 수동 추가
       ============================================================ -->

  <xacro:include filename="$(find drobot_description)/urdf/gazebo.xacro"/>

  <xacro:arg name="use_sim" default="true"/>
  <xacro:arg name="use_ros2_control" default="true"/>

  <!-- ==================== MATERIALS ==================== -->
  <material name="base_color"><color rgba="0.81 0.86 0.90 1"/></material>
  <material name="arm_color"><color rgba="0.87 0.32 0.16 1"/></material>
  <material name="frame_color"><color rgba="0.30 0.30 0.30 1"/></material>
  <material name="wheel_color"><color rgba="0.65 0.65 0.65 1"/></material>

  <!-- ==================== BASE ==================== -->
  <link name="base_footprint"/>

  <joint name="base_footprint_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <link name="base_link">
    <inertial>
      <origin xyz="-0.00239 -0.00675 0.19657" rpy="0 0 0"/>
      <mass value="0.89777"/>
      <inertia ixx="0.000894" ixy="-3.15e-05" ixz="7.38e-08"
               iyy="0.001444" iyz="-7.35e-07" izz="0.001732"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/base_link.STL"/>
      </geometry>
      <material name="base_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/base_link.STL"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== LEFT FRONT ARM ==================== -->
  <link name="left_front_arm">
    <inertial>
      <origin xyz="-0.001 -0.21577 0.24030" rpy="0 0 0"/>
      <mass value="0.05"/>
      <inertia ixx="0.0001" ixy="0" ixz="0"
               iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_front_arm.STL"/>
      </geometry>
      <material name="arm_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_front_arm.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="rev_lf_arm" type="revolute">
    <origin xyz="0.001 -0.22031 0.23615" rpy="-3.1225 0 0"/>
    <parent link="base_link"/>
    <child link="left_front_arm"/>
    <axis xyz="1 0 0"/>
    <limit lower="0" upper="${pi/2}" effort="10" velocity="1.0"/>
    <dynamics damping="0.5" friction="0.1"/>
  </joint>

  <!-- ==================== LEFT SIDE FRAME ==================== -->
  <link name="left_side_frame">
    <inertial>
      <origin xyz="0.000145 0.10634 0.33395" rpy="0 0 0"/>
      <mass value="0.27356"/>
      <inertia ixx="0.000175" ixy="1.60e-06" ixz="-1.73e-06"
               iyy="0.002249" iyz="-5.39e-05" izz="0.002211"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_side_frame.STL"/>
      </geometry>
      <material name="frame_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_side_frame.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="fix_ls_frame" type="fixed">
    <origin xyz="0.0005 -0.01671 0.0040219" rpy="-0.058822 0 0"/>
    <parent link="left_front_arm"/>
    <child link="left_side_frame"/>
  </joint>

  <!-- ==================== LEFT FRONT WHEEL ==================== -->
  <link name="left_front_wheel">
    <inertial>
      <origin xyz="-0.11656 0 0.02494" rpy="0 0 0"/>
      <mass value="0.17861"/>
      <inertia ixx="0.000611" ixy="0" ixz="0"
               iyy="0.000611" iyz="0" izz="0.001171"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_front_wheel.STL"/>
      </geometry>
      <material name="wheel_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_front_wheel.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="con_lf_wheel" type="continuous">
    <origin xyz="-0.1485 0.166 0.4581" rpy="-1.5708 -1.2933 3.1416"/>
    <parent link="left_side_frame"/>
    <child link="left_front_wheel"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0.05"/>
  </joint>

  <!-- ==================== LEFT REAR WHEEL ==================== -->
  <link name="left_rear_wheel">
    <inertial>
      <origin xyz="0.11656 0 0.02435" rpy="0 0 0"/>
      <mass value="0.17645"/>
      <inertia ixx="0.000608" ixy="0" ixz="0"
               iyy="0.000608" iyz="0" izz="0.001169"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_rear_wheel.STL"/>
      </geometry>
      <material name="wheel_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_rear_wheel.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="con_lr_wheel" type="continuous">
    <origin xyz="0.14702 0.164 0.23349" rpy="-1.5708 -1.3064 3.1416"/>
    <parent link="left_side_frame"/>
    <child link="left_rear_wheel"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0.05"/>
  </joint>

  <!-- ==================== LEFT REAR ARM ==================== -->
  <link name="left_rear_arm">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.05"/>
      <inertia ixx="0.0001" ixy="0" ixz="0"
               iyy="0.0001" iyz="0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_rear_arm.STL"/>
      </geometry>
      <material name="arm_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/left_rear_arm.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="rev_lr_arm" type="revolute">
    <origin xyz="0 0 0" rpy="1.5898 0 0"/>
    <parent link="base_link"/>
    <child link="left_rear_arm"/>
    <axis xyz="1 0 0"/>
    <limit lower="0" upper="${pi/2}" effort="10" velocity="1.0"/>
    <dynamics damping="0.5" friction="0.1"/>
    <mimic joint="rev_lf_arm" multiplier="1" offset="0"/>
  </joint>

  <!-- ==================== RIGHT FRONT ARM ==================== -->
  <link name="right_front_arm">
    <inertial>
      <origin xyz="-0.09053 0.04100 0.15322" rpy="0 0 0"/>
      <mass value="0.09050"/>
      <inertia ixx="7.55e-05" ixy="6.14e-06" ixz="-3.92e-06"
               iyy="5.55e-05" iyz="2.21e-05" izz="5.80e-05"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_front_arm.STL"/>
      </geometry>
      <material name="arm_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_front_arm.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="rev_rf_arm" type="revolute">
    <origin xyz="0.001 -0.18333 -0.1565" rpy="-0.037984 0 0"/>
    <parent link="base_link"/>
    <child link="right_front_arm"/>
    <axis xyz="1 0 0"/>
    <limit lower="0" upper="${pi/2}" effort="10" velocity="1.0"/>
    <dynamics damping="0.5" friction="0.1"/>
    <mimic joint="rev_lf_arm" multiplier="1" offset="0"/>
  </joint>

  <!-- ==================== RIGHT SIDE FRAME ==================== -->
  <link name="right_side_frame">
    <inertial>
      <origin xyz="-0.00194 0.00878 0.06088" rpy="0 0 0"/>
      <mass value="0.33700"/>
      <inertia ixx="0.000207" ixy="-1.11e-05" ixz="6.23e-06"
               iyy="0.002364" iyz="-5.34e-05" izz="0.002426"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_side_frame.STL"/>
      </geometry>
      <material name="frame_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_side_frame.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="fix_rs_frame" type="fixed">
    <origin xyz="0.0005 0.16431 0.042431" rpy="1.5276 0 0"/>
    <parent link="right_front_arm"/>
    <child link="right_side_frame"/>
  </joint>

  <!-- ==================== RIGHT FRONT WHEEL ==================== -->
  <link name="right_front_wheel">
    <inertial>
      <origin xyz="-0.11656 0 0.02329" rpy="0 0 0"/>
      <mass value="0.15447"/>
      <inertia ixx="0.000601" ixy="0" ixz="0"
               iyy="0.000601" iyz="0" izz="0.001154"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_front_wheel.STL"/>
      </geometry>
      <material name="wheel_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_front_wheel.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="con_rf_wheel" type="continuous">
    <origin xyz="-0.23311 -0.0017242 0.001" rpy="0 0 -3.1268"/>
    <parent link="right_side_frame"/>
    <child link="right_front_wheel"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0.05"/>
  </joint>

  <!-- ==================== RIGHT REAR WHEEL ==================== -->
  <link name="right_rear_wheel">
    <inertial>
      <origin xyz="-0.11655 0.00172 0.02429" rpy="0 0 0"/>
      <mass value="0.15447"/>
      <inertia ixx="0.000601" ixy="0" ixz="0"
               iyy="0.000601" iyz="0" izz="0.001154"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_rear_wheel.STL"/>
      </geometry>
      <material name="wheel_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_rear_wheel.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="con_rr_wheel" type="continuous">
    <origin xyz="0 0 0" rpy="0 0 -3.1268"/>
    <parent link="right_side_frame"/>
    <child link="right_rear_wheel"/>
    <axis xyz="0 0 1"/>
    <dynamics damping="0.1" friction="0.05"/>
  </joint>

  <!-- ==================== RIGHT REAR ARM ==================== -->
  <link name="right_rear_arm">
    <inertial>
      <origin xyz="0.09542 -0.01003 0.13652" rpy="0 0 0"/>
      <mass value="0.08785"/>
      <inertia ixx="7.23e-05" ixy="-3.98e-06" ixz="-6.02e-06"
               iyy="5.59e-05" iyz="-2.11e-05" izz="5.36e-05"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_rear_arm.STL"/>
      </geometry>
      <material name="arm_color"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://drobot_description/meshes/right_rear_arm.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="rev_rr_arm" type="revolute">
    <origin xyz="0 0 0" rpy="1.5328 0 0"/>
    <parent link="base_link"/>
    <child link="right_rear_arm"/>
    <axis xyz="1 0 0"/>
    <limit lower="0" upper="${pi/2}" effort="10" velocity="1.0"/>
    <dynamics damping="0.5" friction="0.1"/>
    <mimic joint="rev_lf_arm" multiplier="1" offset="0"/>
  </joint>

  <!-- ==================== ROS2 CONTROL ==================== -->
  <xacro:if value="$(arg use_ros2_control)">
    <xacro:include filename="$(find drobot_description)/urdf/ros2_control.xacro"/>
  </xacro:if>

</robot>
